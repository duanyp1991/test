<?php 
/**
 * INCHOO's FREE EXTENSION DISCLAIMER
 *
 * Please do not edit or add to this file if you wish to upgrade Magento
 * or this extension to newer versions in the future.
 *
 * Inchoo developers (Inchooer's) give their best to conform to
 * "non-obtrusive, best Magento practices" style of coding.
 * However, Inchoo does not guarantee functional accuracy of specific
 * extension behavior. Additionally we take no responsibility for any
 * possible issue(s) resulting from extension usage.
 *
 * We reserve the full right not to provide any kind of support for our free extensions.
 *
 * You are encouraged to report a bug, if you spot any,
 * via sending an email to bugreport@inchoo.net. However we do not guaranty
 * fix will be released in any reasonable time, if ever,
 * or that it will actually fix any issue resulting from it.
 *
 * Thank you for your understanding.
 */

/**
 * @category Inchoo
 * @package Inchoo_Prevnext
 * @author Branko Ajzele <ajzele@gmail.com, http://foggyline.net>
 * @copyright Inchoo <http://inchoo.net>
 * @license http://opensource.org/licenses/osl-3.0.php  Open Software License (OSL 3.0)
 */
?>
<?php $_prev = $this->getPreviousProduct(); ?>
<?php $_next = $this->getNextProduct(); ?>
<?php
$get = '';
$i = 0;
foreach($_GET as $k => $v) {
    $i++;
    if($i==1) {
        $get .= "?$k=$v";
    } else {
        $get .= "&$k=$v";
    }
}
?>
<?php if($_prev || $_next || $get != ''): ?>
<div class="prev-next clearfix">
    <?php if(count($_GET) > 0): ?>
        <a rel="next" class="product-next" href="/search<?php echo $get; ?>"><span><?php echo $this->__('Back') ?></span></a>
    <?php else: ?>
        <?php if($_next): ?>
        <a rel="next" class="product-next" title="<?php echo $this->escapeHtml($_next->getName()); ?>" href="<?php echo $_next->getUrlPath(); ?>"><span><?php echo $this->__('next') ?></span></a>
        <?php endif; ?>
        <?php if($_prev): ?>
        <a rel="prev" class="product-prev" title="<?php echo $this->escapeHtml($_prev->getName()); ?>" href="<?php echo $_prev->getUrlPath(); ?>"><span><?php echo $this->__('prev') ?></span></a>
        <?php endif; ?>
    <?php endif; ?>
</div>
<?php endif; ?>
